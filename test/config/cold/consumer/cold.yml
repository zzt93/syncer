version: 1.3

consumerId: cold


input:
  - connection:
      clusterNodes: [${MYSQL_ADDR}]
      autoOffsetReset: latest
    repos:
      - name: "test_.*"
        entities:
          - name: correctness
            cold:
              where: id > 0
              pageSize: 10
          - name: types
          - name: news
      - name: "simple_.*"
        entities:
          - name: simple_type

# tmp solution for unsigned byte conversion, no need if no unsigned byte
filter:
  - method: '
  public void filter(List<SyncData> list) {
    SyncData sync = list.get(0);
    String entity = sync.getEntity();
    switch (entity) {
      case "news":
        SyncUtil.unsignedByte(sync, "plate_sub_type");
      case "toCopy":
        SyncUtil.toStr(sync, "thumb_content");
        SyncUtil.toStr(sync, "content");
        break;
      case "types":
      case "simple_type":
        SyncUtil.toStr(sync, "text");
        SyncUtil.unsignedByte(sync, "tinyint");
        break;
      case "correctness":
        SyncUtil.unsignedByte(sync, "type");
        break;
    }
    sync.mysql(sync.getRepo(), entity + "_bak");
  }
'
# tmp solution

output:
  elasticsearch:
    connection:
      clusterName: ${ES_CLUSTER}
      clusterNodes: ["${ES_ADDR}:9300"]
